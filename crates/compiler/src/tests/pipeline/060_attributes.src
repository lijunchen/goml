trait ToString {
  fn to_string(Self) -> string;
}

impl ToString for int32 {
  fn to_string(self: int32) -> string {
    int32_to_string(self)
  }
}

impl ToString for string {
  fn to_string(self: string) -> string {
    self
  }
}

#[derive(ToString)]
struct Point {
  x: int32,
  y: int32,
}

#[derive(ToString)]
enum Message {
  Quit,
  Move(int32, int32),
  Write(string),
}

fn main() -> unit {
  let point = Point { x: 4, y: 7 };
  let summary = to_string(point);
  let mv = to_string(Message::Move(1, 2));
  let text = to_string(Message::Write("done"));
  let exit = to_string(Message::Quit);
  let _ = string_println(summary);
  let _ = string_println(mv);
  let _ = string_println(text);
  let _ = string_println(exit);
}
