fn make_counter() -> (fn() -> int32, fn() -> ()) {
  let local_0 = ref(0) in
  let local_2 = || => let local_1 = ref_get(local_0) + 1 in
  let _ = ref_set(local_0, local_1) in
  local_1 in
  let local_3 = || => let _ = ref_set(local_0, 0) in
  () in
  (local_2, local_3)
}

fn main() -> () {
  let local_0 = make_counter() in
  let (local_1, local_2) = local_0 in
  let local_3 = local_1() in
  let local_4 = local_1() in
  let _ = local_2() in
  let local_5 = local_1() in
  let local_6 = make_counter() in
  let (local_7, _) = local_6 in
  let local_8 = local_7() in
  let _ = string_println(int32_to_string(local_3)) in
  let _ = string_println(int32_to_string(local_4)) in
  let _ = string_println(int32_to_string(local_5)) in
  let _ = string_println(int32_to_string(local_8)) in
  ()
}