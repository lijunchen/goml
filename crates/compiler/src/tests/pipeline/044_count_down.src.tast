extern type Duration

extern "go" "time" sleep(d: Duration) -> unit

extern "go" "time" duration(nanos: int) -> Duration

fn main() -> unit {
  let counter/0: Ref[int] = (ref : (int) -> Ref[int])(0) in
  let _ : unit = (spawn : (() -> unit) -> unit)(|| => let _ : () -> unit = || => while (int_less : (int, int) -> bool)((ref_get : (Ref[int]) -> int)((counter/0 : Ref[int])), 10) {
      let _ : unit = (string_println : (string) -> unit)("hello") in
      let _ : unit = (sleep : (Duration) -> unit)((duration : (int) -> Duration)(1000)) in
      let _ : unit = (ref_set : (Ref[int], int) -> unit)((counter/0 : Ref[int]), (ref_get : (Ref[int]) -> int)((counter/0 : Ref[int])) + 1) in
      ()
  } in
  ()) in
  while (int_less : (int, int) -> bool)((ref_get : (Ref[int]) -> int)((counter/0 : Ref[int])), 10) {
      ()
  }
}