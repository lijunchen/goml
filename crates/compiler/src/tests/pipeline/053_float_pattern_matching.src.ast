enum FloatEvent {
    Sample32(string, float32),
    Sample64(string, float64)
}

fn summarize(event: FloatEvent) -> string {
    match event {
        Sample32(label, value) => string_add(label, float32_to_string(value)),
        Sample64(label, value) => string_add(label, float64_to_string(value)),
    }
}

fn compare(values: (float32, float64)) -> string {
    match values {
        (left, right) => let limit32: float32 = 1 in
          let limit64: float64 = 5 in
          let less_left = float32_less(left, limit32) in
          let less_right = float64_less(right, limit64) in
          string_add(string_add("left<1?=", bool_to_string(less_left)), string_add(",right<5?=", bool_to_string(less_right))),
    }
}

fn main() {
    let first_value: float32 = 0.5 in
    let second_value: float32 = 2.25 in
    let third_value: float64 = 9.5 in
    let first = Sample32("f32=", first_value) in
    let second = Sample32("f32_b=", second_value) in
    let third = Sample64("f64=", third_value) in
    let tuple: (float32, float64) = (0.75, 4) in
    let tuple_other: (float32, float64) = (1.5, 7.25) in
    let message = string_add(summarize(first), string_add(summarize(second), string_add(summarize(third), string_add(compare(tuple), compare(tuple_other))))) in
    let _ = string_println(message) in
    ()
}

